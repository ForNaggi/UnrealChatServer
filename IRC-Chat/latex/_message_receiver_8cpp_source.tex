\doxysection{Message\+Receiver.\+cpp}
\hypertarget{_message_receiver_8cpp_source}{}\label{_message_receiver_8cpp_source}\index{SocketBuild/MessageReceiver.cpp@{SocketBuild/MessageReceiver.cpp}}
\mbox{\hyperlink{_message_receiver_8cpp}{이 파일의 문서화 페이지로 가기}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ execution\_character\_set("{}utf-\/8"{})}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_message_receiver_8h}{MessageReceiver.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_debug_helper_8h}{DebugHelper.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00013}\mbox{\hyperlink{class_message_receiver_adb7ba8d5430ba18e8c226ba1f386981a}{00013}}\ \mbox{\hyperlink{class_message_receiver_adb7ba8d5430ba18e8c226ba1f386981a}{MessageReceiver::MessageReceiver}}(SOCKET\ client\_socket)}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00014}00014\ \ \ \ \ :\ \mbox{\hyperlink{class_message_receiver_a2905ffef925668d0c802ad1fdf28dab6}{\_clientSocket}}(client\_socket),\ \mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}}(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00015}00015\ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00016}00016\ \ \ \ \ \mbox{\hyperlink{_debug_helper_8h_a87f39d92adfc939c31320aaf4b9f7a37}{LOG\_DEBUG}}(\textcolor{stringliteral}{"{}MessageReceiver\ 객체를\ 생성합니다."{}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00017}00017\ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00019}\mbox{\hyperlink{class_message_receiver_aae8d620cc02dea621ddb4a91b8438b1e}{00019}}\ \mbox{\hyperlink{class_message_receiver_aae8d620cc02dea621ddb4a91b8438b1e}{MessageReceiver::\string~MessageReceiver}}()}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00020}00020\ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00021}00021\ \ \ \ \ \mbox{\hyperlink{_debug_helper_8h_a87f39d92adfc939c31320aaf4b9f7a37}{LOG\_DEBUG}}(\textcolor{stringliteral}{"{}MessageManager\ 객체를\ 삭제합니다."{}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00022}00022\ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00024}\mbox{\hyperlink{class_message_receiver_a0c83ac3a7387ab21f74bc81d6640d9ec}{00024}}\ \mbox{\hyperlink{class_message_receiver_af74bce14070bbf4d0a0324acee430084}{MessageReceiver::Result}}\ \mbox{\hyperlink{class_message_receiver_a0c83ac3a7387ab21f74bc81d6640d9ec}{MessageReceiver::receiveMessage}}()}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00025}00025\ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00026}00026\ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[\mbox{\hyperlink{class_message_receiver_a77e67dede82634157c9aeac775395a33}{MessageReceiver::BUFFER\_SIZE}}];}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00028}00028\ \ \ \ \ \textcolor{comment}{//recv\ 함수는\ 클라이언트\ 소켓의\ 수신\ 버퍼에서\ 데이터를\ 읽어옵니다.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00029}00029\ \ \ \ \ \textcolor{comment}{//\ \ 인자\ 설명:.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00030}00030\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ 첫\ 번째\ 인자:\ 데이터를\ 읽을\ 대상\ 소켓\ (\_clientSocket).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00031}00031\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ 두\ 번째\ 인자:\ 수신\ 데이터를\ 저장할\ 버퍼\ (buffer).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00032}00032\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ 세\ 번째\ 인자:\ 최대\ 읽을\ 바이트\ 수\ (BUFFER\_SIZE\ -\/\ 1).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00033}00033\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ 네\ 번째\ 인자:\ 플래그\ (일반적으로\ 0\ 사용).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00034}00034\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ MSG\_PEEK\ :\ 데이터를\ 읽더라도\ 버퍼를\ 안지움\ (헤더\ 확인\ 시\ 사용할\ 수\ 있음).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00035}00035\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ MSG\_OOB\ :\ 대역\ 외\ 데이터\ 수신.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00036}00036\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ MSG\_WAITALL\ :\ 전체\ 버퍼가\ 채워질\ 때까지\ 대기.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00037}00037\ \ \ \ \ \textcolor{comment}{//\ \ 반환값인\ receive\_result는\ 다음을\ 의미합니다:.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00038}00038\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ >\ 0:\ 실제로\ 읽은\ 바이트\ 수.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00039}00039\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ ==\ 0:\ 연결이\ 정상적으로\ 종료됨.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00040}00040\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ <\ 0:\ 오류\ 발생\ (예:\ 연결\ 끊김\ 또는\ 네트워크\ 오류).}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00041}00041\ \ \ \ \ \textcolor{keywordtype}{int}\ receive\_result\ =\ recv(this-\/>\mbox{\hyperlink{class_message_receiver_a2905ffef925668d0c802ad1fdf28dab6}{\_clientSocket}},\ buffer,\ \mbox{\hyperlink{class_message_receiver_a77e67dede82634157c9aeac775395a33}{BUFFER\_SIZE}}\ -\/\ 1,\ 0);}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00043}00043\ \ \ \ \ \textcolor{comment}{//\ 수신이\ 제대로\ 이루어진\ 경우.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00044}00044\ \ \ \ \ \textcolor{keywordflow}{if}\ (receive\_result\ >\ 0)}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00045}00045\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00046}00046\ \ \ \ \ \ \ \ \ buffer[receive\_result]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00047}00047\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}}\ =\ std::string(buffer);}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00049}00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_debug_helper_8h_a1df2a84bb8d3b43c8c49f1aff655190a}{LOG\_INFO}}(\textcolor{stringliteral}{"{}수신:\ "{}}\ +\ this-\/>\mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 수신\ 받은\ 문자열의\ 케리지\ 리턴을\ 제거합니다.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_message_receiver_ad7dce9c6a9e01f99ba458f8635d86fd5}{cleanMessage}}(this-\/>\mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 수신받은\ 문자열이\ quit인지를\ 체크합니다.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_message_receiver_af9984778a2d338b38cf108b16b47d718}{isQuitCommand}}(this-\/>\mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}}))}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 맞다면.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_message_receiver_af74bce14070bbf4d0a0324acee430084a31933f777c42ffbab532bc7ba2610c68}{MessageReceiver::Result::CLIENT\_QUIT}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_message_receiver_af74bce14070bbf4d0a0324acee430084ad0749aaba8b833466dfcbb0428e4f89c}{MessageReceiver::Result::SUCCESS}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00061}00061\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00062}00062\ \ \ \ \ \textcolor{comment}{//\ 연결이\ 정상적으로\ 종료.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00063}00063\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (receive\_result\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00064}00064\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_debug_helper_8h_a1df2a84bb8d3b43c8c49f1aff655190a}{LOG\_INFO}}(\textcolor{stringliteral}{"{}클라이언트가\ 연결을\ 종료했습니다."{}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_message_receiver_af74bce14070bbf4d0a0324acee430084a50ba526e9a6ee61df579023c1e99817a}{MessageReceiver::Result::CLIENT\_DISCONNECTED}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00067}00067\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00068}00068\ \ \ \ \ \textcolor{comment}{//\ 오류\ 발생.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00069}00069\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00070}00070\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_debug_helper_8h_a27d98b18ba06759c6ef5c71b1e1a9904}{LOG\_ERROR}}(\textcolor{stringliteral}{"{}메시지\ 수신을\ 실패했습니다.\(\backslash\)n에러\ 코드:\ "{}}\ +\ std::to\_string(WSAGetLastError()));}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_message_receiver_af74bce14070bbf4d0a0324acee430084ac6c8a4faea4d0b94dceb90a306074d2b}{MessageReceiver::Result::FAIL\_RECEIVE}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00073}00073\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00074}00074\ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00076}\mbox{\hyperlink{class_message_receiver_a649a859e023ac92682659c83312c64ef}{00076}}\ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{class_message_receiver_a649a859e023ac92682659c83312c64ef}{MessageReceiver::getLastMessage}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00077}00077\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00078}00078\ \ \ \ \ \textcolor{comment}{//\ 마지막\ 문자열을\ 반환합니다.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00079}00079\ \ \ \ \ \textcolor{keywordflow}{return}\ (this-\/>\mbox{\hyperlink{class_message_receiver_a9e44455ed76f630e9bb73614033cfabe}{\_lastMessage}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00080}00080\ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00082}\mbox{\hyperlink{class_message_receiver_af9984778a2d338b38cf108b16b47d718}{00082}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_message_receiver_af9984778a2d338b38cf108b16b47d718}{MessageReceiver::isQuitCommand}}(\textcolor{keyword}{const}\ std::string\&\ message)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00083}00083\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00084}00084\ \ \ \ \ \textcolor{comment}{//\ quit가\ 맞으면\ true,\ 틀리면\ false.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00085}00085\ \ \ \ \ \textcolor{keywordflow}{return}\ (message\ ==\ \textcolor{stringliteral}{"{}quit"{}});}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00086}00086\ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00088}\mbox{\hyperlink{class_message_receiver_ad7dce9c6a9e01f99ba458f8635d86fd5}{00088}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_message_receiver_ad7dce9c6a9e01f99ba458f8635d86fd5}{MessageReceiver::cleanMessage}}(std::string\&\ message)}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00089}00089\ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00090}00090\ \ \ \ \ \textcolor{comment}{//\ 캐리지\ 리턴을\ 제거합니다.}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00091}00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (!message.empty()\ \&\&\ message.back()\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00092}00092\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00093}00093\ \ \ \ \ \ \ \ \ message.pop\_back();}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00094}00094\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00095}00095\ \ \ \ \ \textcolor{keywordflow}{if}\ (!message.empty()\ \&\&\ message.back()\ ==\ \textcolor{charliteral}{'\(\backslash\)r'})}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00096}00096\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00097}00097\ \ \ \ \ \ \ \ \ message.pop\_back();}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00098}00098\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_message_receiver_8cpp_source_l00099}00099\ \}}

\end{DoxyCode}
